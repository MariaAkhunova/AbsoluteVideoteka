{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<div class="movies-grid">
    {% for movie in movies_list %}
    <a href="/movie/{{ movie.movie_id }}/" class="movie-card-link">
        <div class="movie-card">
            <!-- –ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞ -->
            <div class="movie-poster">
                {% if movie.poster %}
                    <img src="{{ movie.poster.url }}" alt="{{ movie.title }}">
                {% else %}
                    <img src="{% static 'images/default-poster.jpg' %}" alt="{{ movie.title }}">
                {% endif %}
                
                <!-- –¶–µ–Ω–∞ –ø–æ–≤–µ—Ä—Ö –ø–æ—Å—Ç–µ—Ä–∞ -->
                <div class="movie-price">{{ movie.price }} ‚ÇΩ</div>
            </div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ -->
            <div class="movie-info">
                <h3 class="movie-title">{{ movie.title }}</h3>
                <p class="movie-details">{{ movie.release_year }} ‚Ä¢ {{ movie.genre }}</p>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –∫—É–ø–∏—Ç—å - –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏—è -->
                <div class="movie-actions" onclick="event.stopPropagation()">
                    {% if user.is_authenticated %}
                        <button class="buy-btn" onclick="event.stopPropagation(); buyMovie({{ movie.movie_id }})">
                            üõí –ö—É–ø–∏—Ç—å
                        </button>
                    {% else %}
                        <a href="{% url 'login' %}" class="login-btn" onclick="event.stopPropagation()">
                            üîí –í–æ–π—Ç–∏ –¥–ª—è –ø–æ–∫—É–ø–∫–∏
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </a>
    {% empty %}
    <div class="no-movies">
        <p>–§–∏–ª—å–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
    </div>
    {% endfor %}
</div>
{% endblock %}